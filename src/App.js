import './App.css';
import EmployeeAPI from "./api/service";
import Table from "./Table";
import React, { useState } from "react"; // –∏–º–ø–æ—Ä—Ç–∏—Ä—É–µ–º —Ö—É–∫ useState –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º

function App() {
  // üîπ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –∏–∑ API
  const [employees, setEmployees] = useState(EmployeeAPI.all());

  // üîª –§—É–Ω–∫—Ü–∏—è —É–¥–∞–ª–µ–Ω–∏—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –ø–æ ID
  const handleDelete = (id) => {
    EmployeeAPI.delete(id); // —É–¥–∞–ª—è–µ–º –∏–∑ API
    setEmployees([...EmployeeAPI.all()]); // –æ–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
  };

  // üî∫ –§—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
  const handleAdd = () => {
    const newEmployee = {
      number: Date.now(), // —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –Ω–∞ –æ—Å–Ω–æ–≤–µ –≤—Ä–µ–º–µ–Ω–∏
      name: "New Employee", // –∏–º—è –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
      job: "Intern", // –¥–æ–ª–∂–Ω–æ—Å—Ç—å –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
    };
    EmployeeAPI.add(newEmployee); // –¥–æ–±–∞–≤–ª—è–µ–º –≤ API
    setEmployees([...EmployeeAPI.all()]); // –æ–±–Ω–æ–≤–ª—è–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–µ
  };

  return (
    <div className="App">
      <h1>Casino Staff</h1>

      {/* üîò –ö–Ω–æ–ø–∫–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–≥–æ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ */}
      <button onClick={handleAdd}>Add Employee</button>

      {/* üìã –¢–∞–±–ª–∏—Ü–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ —Å –ø–µ—Ä–µ–¥–∞—á–µ–π –¥–∞–Ω–Ω—ã—Ö –∏ —Ñ—É–Ω–∫—Ü–∏–∏ —É–¥–∞–ª–µ–Ω–∏—è */}
      <Table employees={employees} onDelete={handleDelete} />
    </div>
  );
}

export default App;
